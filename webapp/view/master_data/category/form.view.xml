<mvc:View
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.uxap"
    xmlns:m="sap.m"
    xmlns:f="sap.ui.layout.form"
    xmlns:table="sap.ui.table"
    xmlns:u="sap.ui.unified"
    xmlns:core="sap.ui.core"
    controllerName="my.app.controller.Category">
     <m:Page showNavButton="true" navButtonPress="onNavBack">
        <ObjectPageLayout
            id="ObjectPageLayout"
            enableLazyLoading="false"
            useIconTabBar="true"
            showTitleInHeaderContent="true"
            upperCaseAnchorBar="false">
            <headerTitle>
                <ObjectPageDynamicHeaderTitle>
                    <heading>
                        <m:Title text="{model>/titleForm}" />
                    </heading>

                    <snappedTitleOnMobile>
                        <m:Title text="{model>/titleForm}" />
                    </snappedTitleOnMobile>
                </ObjectPageDynamicHeaderTitle>
            </headerTitle>
            <headerContent>
                <m:HeaderContainer id="headerContainer" scrollStep="200" showDividers="false">
                    <m:HBox class="sapUiSmallMarginEnd sapUiSmallMarginBottom">
                        <m:VBox class="sapUiLargeMarginEnd">
                            <m:Title class="sapUiTinyMarginBottom" text="Status:"/>
                            <m:ObjectStatus
                                text="{= ${model>/status} === 'true' ? 'Active' : 'Inactive' }"
                                state="{= ${model>/status} === 'true' ? 'Success' : 'Error' }"
                                class="sapMObjectStatusLarge" />
                        </m:VBox> 
                    </m:HBox>
                </m:HeaderContainer>
            </headerContent>

            <sections>
                <ObjectPageSection titleUppercase="false" title="">
                    <subSections>
                        <ObjectPageSubSection title="General" mode="Expanded" titleUppercase="false">

                            <f:Form id="general_form"
                                editable="true">

                                <f:layout>
                                    <f:ResponsiveGridLayout
                                        labelSpanXL="4"
                                        labelSpanL="4"
                                        labelSpanM="12"
                                        labelSpanS="12"
                                        adjustLabelSpan="false"
                                        emptySpanXL="0"
                                        emptySpanL="0"
                                        emptySpanM="0"
                                        emptySpanS="0"
                                        columnsXL="2"
                                        columnsL="2"
                                        columnsM="2"
                                        singleContainerFullSize="false" />
                                </f:layout>
                                <f:FormContainer title="">
                                    <f:formElements>

                                        <f:FormElement label="Code">
                                            <f:fields>
                                                <m:Input name="code" required="true" value="{model>/code}" valueState="{= ${model>/code} ? 'None' : 'Error' }" change="handlerChange" />
                                            </f:fields>
                                        </f:FormElement>

                                        <f:FormElement label="Name">
                                            <f:fields>
                                                <m:Input id="name" name="name" required="true" value="{model>/name}" valueState="{= ${model>/name} ? 'None' : 'Error' }" change="handlerChange" />
                                            </f:fields>
                                        </f:FormElement>

                                        <f:FormElement label="Foreign Name">
                                            <f:fields>
                                                <m:Input name="foreign_name" value="{model>/foreign_name}" change="handlerChange" />
                                            </f:fields>
                                        </f:FormElement>

                                    </f:formElements>
                                </f:FormContainer>

                                <f:FormContainer title="">
                                    <f:formElements>

                                        <f:FormElement label="Status">
                                            <f:fields>
                                                <m:Select
                                                    name="status"
                                                    selectedKey="{model>/status}"
                                                    forceSelection="false"
                                                    change="handlerChange"
                                                    items="{model>/statusList}">
                                                    <core:Item
                                                        key="{model>value}"
                                                        text="{model>name}" />
                                                </m:Select>
                                            </f:fields>
                                        </f:FormElement> 

                                    </f:formElements>
                                </f:FormContainer>
                            </f:Form>

                        </ObjectPageSubSection>
                    </subSections>
                </ObjectPageSection>

                <ObjectPageSection titleUppercase="false" title="Attachment">
                    <subSections>
                        <ObjectPageSubSection title="Attachment" mode="Expanded"
                            titleUppercase="false">
                            <m:UploadCollection
                                id="UploadCollection"
                                maximumFilenameLength="55"
                                maximumFileSize="10"
                                multiple="false"
                                change="onUploadChange"
                                fileDeleted="onFileDeleted"
                                filenameLengthExceed="onFilenameLengthExceed"
                                fileSizeExceed="onFileSizeExceed"
                                selectionChange="onSelectionChange"
                                typeMissmatch="onTypeMissmatch"
                                uploadComplete="onUploadComplete"
                                beforeUploadStarts="onBeforeUploadStarts"
                                uploadTerminated="onUploadTerminated"
                                items="{model>/attachments}">
                                <m:toolbar>
                                    <m:OverflowToolbar visible="false"> 
                                        <m:ToolbarSpacer />
                                        <m:UploadCollectionToolbarPlaceholder/>
                                    </m:OverflowToolbar>
                                </m:toolbar>
                                <m:items>
                                    <m:UploadCollectionItem
                                        documentId="{model>documentId}"
                                        fileName="{model>FileName}"
                                        enableEdit="false"
                                        visibleEdit="false"
                                        enableDelete="true"
                                        mimeType="{model>mimeType}"
                                        thumbnailUrl="{model>SourcePath}"
                                        url="{model>SourcePath}"
                                        press="onThumbnailPress">
                                        <m:attributes>
                                            <m:ObjectAttribute title="File Name"
                                                text="{model>FileName}"
                                                active="true"
                                                press="onAttributePress" />

                                            <m:ObjectAttribute title="Attachment Date"
                                                text="{model>AttachmentDate}"
                                                active="true"
                                                press="onAttributePress" />
                                        </m:attributes>
                                    </m:UploadCollectionItem>
                                </m:items>
                            </m:UploadCollection>
                        </ObjectPageSubSection>
                    </subSections>
                </ObjectPageSection>
            </sections>
        </ObjectPageLayout>
        <m:footer>
            <m:Bar class="customFooterBar">
                <m:contentRight>
                    <m:Button text="{model>/buttonSubmit}" press="handlerSave"
                        type="Emphasized"
                        class="sapUiTinyMarginEnd" />
                    <m:Button text="Cancel" press="onNavBack" />
                </m:contentRight>
            </m:Bar>
        </m:footer>
    </m:Page>
</mvc:View>
